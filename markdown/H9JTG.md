[TOCM]

[TOC]

# 分组函数介绍

分组函数作用于一组数据，并对一组数据返回一个值。

常见的分组函数

| 函数名称 | 函数描述 |
|----------|---------|
| count    | 返回找到的记录数 |
| min      | 返回一个数字列或者计算列的最小值 |
| max | 返回一个数字列或者计算列的最大值  |
| sum | 返回一个数字列或计算列总和 |
| avg | 返回一个数字列或计算列的平均值 |

分组函数忽略空值

# group by 子句

group by 语句从英文的字面意义上理解就是 “根据(by)一定的规则进行分组。 它的作用是通过一定的规则将一个数据集分成若干个小区域进行数据处理。如果在查询过程中需要按某一列的值进行分组，以统计该组内数据的信息时，就要使用group by 子句。不管select 是否使用了where子句都可以使用group by 子句。”

> group by 子句一定要与分组函数结合使用，否则没有意义。

> 当使用分组函数的select语句中没有group by子句时，中间结果集中的所有行自动形成一组，然后使用分组函数计算每一组的统计信息。

> 分组函数不允许嵌套。

> 分组函数的参数可以是列或者函数表达式。

> 一个select 子句可以出现多个聚集函数。

> 分组列可以不出现在select子句中。

> 分组列可出现在select子句中的一个复合表达式。


例:
```
mysql> select count(distinct salary) from salary_tab;
+------------------------+
| count(distinct salary) |
+------------------------+
|                      3 |
+------------------------+

mysql> select * from TT;
+------+------------+
| UNIT | DATE       |
+------+------------+
| a    | 2018-04-03 |
| a    | 2017-12-12 |
| b    | 2018-01-01 |
| b    | 2018-04-03 |
| c    | 2016-06-06 |
| d    | 2018-03-03 |
+------+------------+
rows in set (0.00 sec)

mysql> select UNIT as '单位',
    ->     COUNT(TO_DAYS(DATE)=TO_DAYS(NOW()) or null) as '今日统计',
    ->     COUNT(YEAR(DATE)=YEAR(NOW()) or null) as '今年统计'
    -> from v_jjd
    -> group by JJDW;
+------+----------+----------+
| 单位  | 今日统计  | 今年统计  |
+------+----------+----------+
| a    |        1 |        1 |
| b    |        1 |        2 |
| c    |        0 |        0 |
| d    |        0 |        1 |
+------+----------+----------+
rows in set (0.00 sec)

```

